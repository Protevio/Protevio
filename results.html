<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Search Results â€” Protevio AI</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%235b9aff' rx='20' width='100' height='100'/><text x='50' y='68' text-anchor='middle' fill='white' font-size='55' font-weight='800' font-family='system-ui'>P</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600;9..40,700;9..40,800&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0f1318;color:#d1d5db;font-family:'DM Sans',system-ui,sans-serif;min-height:100vh}
a{color:#5b9aff;text-decoration:none}

/* ===== NAV ===== */
.nav{background:linear-gradient(180deg,#15191f,#111518);border-bottom:1px solid #222830;position:sticky;top:0;z-index:100}
.nav__inner{max-width:1200px;margin:0 auto;padding:0 32px;height:60px;display:flex;align-items:center}
.nav__logo{display:flex;align-items:center;gap:10px;text-decoration:none;flex-shrink:0}
.nav__logo-mark{width:34px;height:34px}
.nav__logo-mark svg{width:100%;height:100%}
.nav__logo-text{font-weight:800;font-size:.95rem;letter-spacing:.08em;color:#f1f5f9;text-transform:uppercase}
.nav__center{flex:1;display:flex;justify-content:center;gap:2px}
.nav__link{padding:7px 16px;font-size:.82rem;color:#6b7280;text-decoration:none;font-weight:500;border-radius:6px;transition:all .15s;font-family:inherit}
.nav__link:hover{color:#e5e7eb;background:rgba(255,255,255,.05)}
.nav__right{width:140px;flex-shrink:0}

/* ===== INFO BAR ===== */
.info-bar{background:#15191f;border-bottom:1px solid #222830;padding:14px 0}
.info-bar__inner{max-width:1200px;margin:0 auto;padding:0 32px;display:flex;align-items:center;gap:16}
.info-bar__thumb{width:50px;height:50px;border-radius:12px;object-fit:cover;border:2px solid #2a3040;flex-shrink:0;background:#1e2430}
.info-bar__meta{flex:1}
.info-bar__plan{font-size:.76rem;font-weight:700;color:#5b9aff;text-transform:uppercase;letter-spacing:.06em}
.info-bar__plan--paid{color:#4ade80}
.info-bar__stats{font-size:.86rem;color:#6b7280}
.info-bar__stats strong{color:#e5e7eb}
.info-bar__btn{padding:8px 16px;border-radius:8px;font-size:.8rem;font-weight:600;cursor:pointer;font-family:inherit;display:flex;align-items:center;gap:6px;border:none;transition:all .15s}
.info-bar__btn--outline{background:none;border:1px solid #2a3040;color:#9ca3af}
.info-bar__btn--outline:hover{border-color:#3a4a60;color:#e2e8f0}
.info-bar__btn--report{background:linear-gradient(135deg,#dc2626,#b91c1c);color:#fff;box-shadow:0 2px 8px rgba(220,38,38,.2)}
.info-bar__btn--report:hover{box-shadow:0 4px 16px rgba(220,38,38,.35)}
.info-bar__btn svg{width:15px;height:15px;stroke:currentColor;stroke-width:2;fill:none}

/* ===== UNLOCK BANNER ===== */
.unlock-banner{background:linear-gradient(135deg,#1d4ed8,#2563eb);display:none}
.unlock-banner__inner{max-width:1200px;margin:0 auto;padding:16px 32px;display:flex;align-items:center;justify-content:space-between;gap:16;flex-wrap:wrap}
.unlock-banner__text{color:#fff}
.unlock-banner__title{font-weight:700;font-size:.95rem}
.unlock-banner__title u{text-decoration-color:rgba(255,255,255,.4)}
.unlock-banner__sub{font-size:.82rem;color:rgba(255,255,255,.65);margin-top:2px}
.unlock-btn{background:#fff;color:#1d4ed8;border:none;padding:10px 24px;border-radius:50px;font-family:inherit;font-size:.88rem;font-weight:700;cursor:pointer;white-space:nowrap;display:flex;align-items:center;gap:6px;transition:all .2s;box-shadow:0 2px 10px rgba(0,0,0,.15)}
.unlock-btn:hover{transform:scale(1.03);box-shadow:0 4px 20px rgba(0,0,0,.25)}
.unlock-btn svg{width:16px;height:16px;stroke:#1d4ed8;stroke-width:2;fill:none}

/* ===== TRIAL BANNER (results) ===== */
.trial-bar{background:linear-gradient(135deg,#7c3aed,#6d28d9);display:none}
.trial-bar__inner{max-width:1200px;margin:0 auto;padding:14px 32px;display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap}
.trial-bar__text{color:#fff}
.trial-bar__title{font-weight:700;font-size:.92rem}
.trial-bar__sub{font-size:.8rem;color:rgba(255,255,255,.6);margin-top:2px}
.trial-bar__btn{background:#fff;color:#6d28d9;border:none;padding:10px 24px;border-radius:50px;font-family:inherit;font-size:.86rem;font-weight:700;cursor:pointer;white-space:nowrap;display:flex;align-items:center;gap:6px;transition:all .2s;box-shadow:0 2px 10px rgba(0,0,0,.15)}
.trial-bar__btn:hover{transform:scale(1.03);box-shadow:0 4px 20px rgba(0,0,0,.25)}
.trial-bar__btn:disabled{opacity:.6;cursor:not-allowed;transform:none}
.trial-bar__btn svg{width:16px;height:16px;stroke:#6d28d9;stroke-width:2;fill:none}
.trial-active-badge{display:inline-flex;align-items:center;gap:5px;background:rgba(74,222,128,.12);border:1px solid rgba(74,222,128,.2);padding:3px 10px;border-radius:6px;font-size:.72rem;font-weight:700;color:#4ade80;letter-spacing:.03em}

/* ===== GRID ===== */
.results{max-width:1200px;margin:0 auto;padding:24px 32px}
.results__grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;display:none}

/* ===== CARD ===== */
.card{border-radius:12px;overflow:hidden;cursor:pointer;transition:all .25s;background:#1a1f28;border:1px solid transparent;position:relative}
.card:hover{transform:translateY(-3px);box-shadow:0 8px 28px rgba(0,0,0,.4);border-color:#2a3959}
.card__wrap{position:relative;width:100%;aspect-ratio:1;overflow:hidden;background:#12161e}
.card__img{width:100%;height:100%;object-fit:cover;transition:transform .3s}
.card:hover .card__img{transform:scale(1.02)}

/* Locked */
.card--locked .card__img{filter:blur(10px) saturate(.5);transform:scale(1.08)}
.card--locked:hover .card__img{filter:blur(8px) saturate(.6);transform:scale(1.1)}
.card--locked .card__noise{display:block}
.card__noise{display:none;position:absolute;inset:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.18'/%3E%3C/svg%3E");background-size:128px;opacity:.5;z-index:1;pointer-events:none}

/* Badges */
.card__explicit{position:absolute;top:10px;left:10px;background:rgba(0,0,0,.6);backdrop-filter:blur(4px);padding:4px 10px;border-radius:6px;font-size:.66rem;font-weight:700;color:#fff;z-index:3;display:flex;align-items:center;gap:4px;letter-spacing:.02em}
.card__explicit span{background:rgba(255,255,255,.2);padding:1px 5px;border-radius:3px;font-weight:800}
.card__tap{position:absolute;top:10px;right:10px;background:rgba(255,255,255,.08);backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,.1);padding:5px 12px;border-radius:7px;font-size:.74rem;font-weight:600;color:rgba(255,255,255,.8);z-index:3;display:none;align-items:center;gap:5px}
.card--locked .card__tap{display:flex}
.card__tap svg{width:13px;height:13px;stroke:currentColor;stroke-width:2;fill:none}
.card__domain{position:absolute;bottom:10px;left:10px;background:rgba(0,0,0,.45);backdrop-filter:blur(6px);padding:4px 10px;border-radius:5px;font-size:.72rem;color:#d1d5db;font-weight:500;z-index:3;max-width:calc(100% - 90px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.card__sim{position:absolute;bottom:10px;right:10px;background:rgba(91,154,255,.12);border:1px solid rgba(91,154,255,.15);padding:4px 8px;border-radius:5px;font-size:.7rem;color:#5b9aff;font-weight:700;z-index:3}

/* Tease animation */
.card--locked.tease .card__img{filter:blur(3px) saturate(.8)!important;transition:filter .25s}
.card--locked.tease .card__tap{opacity:0;transition:opacity .25s}
.card--locked.tease .card__noise{opacity:.2;transition:opacity .25s}

/* ===== MODAL ===== */
.modal-bg{display:none;position:fixed;inset:0;background:rgba(0,0,0,.75);backdrop-filter:blur(4px);z-index:1000;justify-content:center;align-items:center;padding:20px}
.modal-bg.open{display:flex}
.modal{background:linear-gradient(170deg,#1a1f2e 0%,#141820 40%,#111518 100%);border:1px solid #2a3050;border-radius:14px;width:450px;max-height:88vh;overflow-y:auto;box-shadow:0 25px 60px rgba(0,0,0,.6),0 0 0 1px rgba(91,154,255,.06),inset 0 1px 0 rgba(255,255,255,.04);color:#d1d5db;position:relative}
@keyframes modalIn{from{opacity:0;transform:scale(.96) translateY(8px)}to{opacity:1;transform:none}}
.modal-bg.open .modal{animation:modalIn .2s ease}
.modal__close{position:absolute;top:12px;right:12px;width:30px;height:30px;background:rgba(0,0,0,.4);backdrop-filter:blur(4px);border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#9ca3af;font-size:15px;font-weight:600;z-index:10;border:1px solid rgba(255,255,255,.08);transition:all .15s}
.modal__close:hover{background:rgba(255,255,255,.1);color:#fff}
.modal__img-wrap{position:relative;width:100%;aspect-ratio:4/3;overflow:hidden;border-radius:14px 14px 0 0;background:#12161e}
.modal__img{width:100%;height:100%;object-fit:cover}
.modal__img--locked{filter:blur(14px) saturate(.4);transform:scale(1.1)}
.modal__lock{position:absolute;inset:0;display:none;flex-direction:column;align-items:center;justify-content:center;gap:6px;z-index:2}
.modal__lock svg{width:40px;height:40px;stroke:rgba(255,255,255,.75);stroke-width:1.5;fill:none}
.modal__lock-text{color:#fff;font-weight:700;font-size:.95rem;text-shadow:0 2px 8px rgba(0,0,0,.5)}
.modal__lock-sub{color:rgba(255,255,255,.5);font-size:.78rem}
.modal__domain-badge{position:absolute;bottom:10px;left:10px;background:rgba(0,0,0,.55);backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,.08);padding:5px 12px;border-radius:6px;font-size:.78rem;color:#e2e8f0;font-weight:600;z-index:3}

/* Action rows */
.modal__action{display:flex;align-items:center;gap:14px;padding:14px 20px;cursor:pointer;transition:background .12s;border-bottom:1px solid rgba(255,255,255,.04)}
.modal__action:hover{background:rgba(255,255,255,.03)}
.modal__action--disabled{opacity:.3;cursor:not-allowed}
.modal__action--disabled:hover{background:transparent}
.modal__action-icon{width:34px;height:34px;border-radius:10px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.06);display:flex;align-items:center;justify-content:center;flex-shrink:0}
.modal__action-icon svg{width:20px;height:20px;fill:none}
.modal__action-body{flex:1;min-width:0}
.modal__action-title{font-size:.86rem;font-weight:600;color:#e2e8f0}
.modal__action-sub{font-size:.74rem;color:#6b7280;margin-top:1px}
.modal__action-chevron{width:18px;height:18px;stroke:#4b5563;stroke-width:2;fill:none;flex-shrink:0}
.modal__footer{padding:12px 20px;font-size:.73rem;color:#4b5563;border-top:1px solid rgba(255,255,255,.04)}

/* ===== EMPTY / LOADING ===== */
.empty{text-align:center;padding:100px 24px;display:none}
.empty svg{width:64px;height:64px;stroke:#4b5563;stroke-width:1.5;fill:none;margin-bottom:20px}
.empty h3{font-size:1.15rem;margin-bottom:6px;color:#e2e8f0}
.empty p{color:#6b7280;font-size:.88rem;margin-bottom:20px}
.loading{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:120px 24px;gap:16px}
.spinner{width:40px;height:40px;border:3px solid #1e293b;border-top-color:#5b9aff;border-radius:50%;animation:spin .8s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* ===== RESPONSIVE ===== */
@media(max-width:900px){
  .results__grid{grid-template-columns:repeat(2,1fr);gap:12px}
  .nav__center{gap:0}
  .nav__link{padding:6px 10px;font-size:.78rem}
  .nav__right{width:60px}
  .info-bar__btn span{display:none}
}
@media(max-width:600px){
  .results__grid{grid-template-columns:repeat(2,1fr);gap:10px}
  .results{padding:16px}
  .nav__inner{padding:0 16px}
  .nav__link{padding:5px 8px;font-size:.72rem}
  .nav__right{width:20px}
  .info-bar__inner{padding:0 16px;gap:10px}
  .unlock-banner__inner{padding:14px 16px;flex-direction:column;text-align:center}
  .trial-bar__inner{padding:14px 16px;flex-direction:column;text-align:center}
  .modal{width:95%;max-width:none}
  .card__explicit{font-size:.58rem;padding:3px 7px}
  .card__tap{font-size:.66rem;padding:4px 8px}
  .card__domain{font-size:.64rem;padding:3px 7px;max-width:calc(100% - 70px)}
  .card__sim{font-size:.62rem;padding:3px 6px}
}
@media(max-width:400px){
  .nav__center a:nth-child(n+5){display:none}
}

/* Scrollbar */
.modal::-webkit-scrollbar{width:6px}
.modal::-webkit-scrollbar-track{background:transparent}
.modal::-webkit-scrollbar-thumb{background:#2a3050;border-radius:3px}
</style>
</head>
<body>

<!-- NAV -->
<nav class="nav">
  <div class="nav__inner">
    <a href="/" class="nav__logo">
      <div class="nav__logo-mark">
        <svg viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
          <polygon points="18,2 33,10 33,26 18,34 3,26 3,10" stroke="url(#hexGrad)" stroke-width="1.4" fill="none"/>
          <circle cx="18" cy="18" r="5.5" fill="url(#hexGrad)" opacity=".9"/>
          <circle cx="18" cy="18" r="2" fill="#0f1318"/>
          <defs>
            <linearGradient id="hexGrad" x1="0" y1="0" x2="36" y2="36">
              <stop offset="0%" stop-color="#00e5ff"/>
              <stop offset="100%" stop-color="#7c4dff"/>
            </linearGradient>
          </defs>
        </svg>
      </div>
      <span class="nav__logo-text">PROTEVIO</span>
    </a>
    <div class="nav__center">
      <a href="/" class="nav__link">Search</a>
      <a href="/pricing.html" class="nav__link">Pricing</a>
      <a href="/blog.html" class="nav__link">Blog</a>
      <a href="/opt-out.html" class="nav__link">Opt-out</a>
      <a href="/faq.html" class="nav__link">FAQ</a>
      <a href="/contact.html" class="nav__link">Contact</a>
    </div>
    <div class="nav__right"></div>
  </div>
</nav>

<!-- INFO BAR -->
<div class="info-bar">
  <div class="info-bar__inner">
    <img class="info-bar__thumb" id="faceThumb" src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'><rect fill='%231e2430' width='50' height='50'/><text x='25' y='30' text-anchor='middle' fill='%234b5563' font-size='18'>ðŸ‘¤</text></svg>" alt="">
    <div class="info-bar__meta">
      <div class="info-bar__plan" id="planLabel">Free Search</div>
      <div class="info-bar__stats">About <strong id="statCount">â€”</strong> results in <strong id="statTime">â€”</strong></div>
    </div>
    <a href="/" class="info-bar__btn info-bar__btn--outline">
      <svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      <span>New Search</span>
    </a>
    <button class="info-bar__btn info-bar__btn--report" id="pdfBtn" style="display:none">
      <svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
      <span>Generate report</span>
    </button>
  </div>
</div>

<!-- UNLOCK BANNER -->
<div class="unlock-banner" id="unlockBanner">
  <div class="unlock-banner__inner">
    <div class="unlock-banner__text">
      <div class="unlock-banner__title">Unlock access to <u>current search results</u> for <strong>9,99 â‚¬</strong></div>
      <div class="unlock-banner__sub">Pay once to see the source of the photos and original websites of the current search.</div>
    </div>
    <button class="unlock-btn" id="unlockBtn">
      Unlock results
      <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/></svg>
    </button>
  </div>
</div>

<!-- TRIAL BANNER -->
<div class="trial-bar" id="trialBar">
  <div class="trial-bar__inner">
    <div class="trial-bar__text">
      <div class="trial-bar__title" id="trialBarTitle">Want to see all results? Start your <strong>3-day free trial</strong></div>
      <div class="trial-bar__sub" id="trialBarSub">Full access to source URLs, unblurred photos, and website details â€” no card required.</div>
    </div>
    <button class="trial-bar__btn" id="trialBarBtn">
      <svg viewBox="0 0 24 24"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
      <span id="trialBarBtnText">Start Free Trial</span>
    </button>
  </div>
</div>

<!-- MAIN -->
<main class="results">
  <div class="loading" id="loadingState">
    <div class="spinner"></div>
    <div style="font-size:.85rem;color:#6b7280">Loading results...</div>
  </div>
  <div class="results__grid" id="grid"></div>
  <div class="empty" id="noResults">
    <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="8" y1="15" x2="16" y2="15"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></svg>
    <h3>No Matches Found</h3>
    <p>We didn't find any matching faces in our database. Try a clearer photo.</p>
    <a href="/" style="display:inline-block;padding:10px 24px;background:linear-gradient(135deg,#5b9aff,#7c4dff);color:#fff;border-radius:10px;font-weight:600;font-size:.88rem;margin-top:8px">Try Another Search</a>
  </div>
</main>

<!-- MODAL -->
<div class="modal-bg" id="modalBg">
  <div class="modal">
    <div class="modal__close" id="modalClose">âœ•</div>
    <div class="modal__img-wrap">
      <img class="modal__img" id="modalImg" src="" alt="Match">
      <div class="modal__lock" id="modalLock">
        <svg viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>
        <div class="modal__lock-text">Unlock to reveal</div>
        <div class="modal__lock-sub" id="modalLockPct"></div>
      </div>
      <div class="modal__domain-badge" id="modalDomainBadge">â€”</div>
    </div>

    <!-- Action rows -->
    <div id="modalActions">
      <div class="modal__action" id="actWebsite">
        <div class="modal__action-icon">
          <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="#3b82f6" stroke-width="1.8"/><path d="M2 12h20" stroke="#3b82f6" stroke-width="1.2" opacity=".4"/><path d="M12 2c2.5 2.5 4 6 4 10s-1.5 7.5-4 10c-2.5-2.5-4-6-4-10s1.5-7.5 4-10z" stroke="#3b82f6" stroke-width="1.2" fill="none"/></svg>
        </div>
        <div class="modal__action-body">
          <div class="modal__action-title">Open website</div>
          <div class="modal__action-sub">Click to go to the website that this image appears on.</div>
        </div>
        <svg class="modal__action-chevron" viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg>
      </div>
      <div class="modal__action" id="actImage">
        <div class="modal__action-icon">
          <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="3" stroke="#8b5cf6" stroke-width="1.8"/><circle cx="8.5" cy="8.5" r="1.5" fill="#8b5cf6"/><path d="M21 15l-5-5L5 21" stroke="#8b5cf6" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </div>
        <div class="modal__action-body">
          <div class="modal__action-title">Open image</div>
          <div class="modal__action-sub">Click to access the source image (unblurred version).</div>
        </div>
        <svg class="modal__action-chevron" viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg>
      </div>
      <div class="modal__action" id="actSearch">
        <div class="modal__action-icon">
          <svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8" stroke="#06b6d4" stroke-width="1.8"/><line x1="21" y1="21" x2="16.65" y2="16.65" stroke="#06b6d4" stroke-width="1.8" stroke-linecap="round"/></svg>
        </div>
        <div class="modal__action-body">
          <div class="modal__action-title">Perform search with this image</div>
          <div class="modal__action-sub">Click to start a new search with this image.</div>
        </div>
        <svg class="modal__action-chevron" viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg>
      </div>
      <div class="modal__action" id="actCopy">
        <div class="modal__action-icon">
          <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" stroke="#6366f1" stroke-width="1.8"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1" stroke="#6366f1" stroke-width="1.8"/></svg>
        </div>
        <div class="modal__action-body">
          <div class="modal__action-title">Copy Result ID</div>
          <div class="modal__action-sub">Copy the ID of this result for further actions.</div>
        </div>
        <svg class="modal__action-chevron" viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg>
      </div>
      <div class="modal__action" id="actExclude">
        <div class="modal__action-icon">
          <svg viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke="#10b981" stroke-width="1.8"/><polyline points="9 12 11 14 15 10" stroke="#10b981" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </div>
        <div class="modal__action-body">
          <div class="modal__action-title">Exclude from public results</div>
          <div class="modal__action-sub">Remove the photo from Protevio's public search.</div>
        </div>
        <svg class="modal__action-chevron" viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg>
      </div>
      <div class="modal__action" id="actShare">
        <div class="modal__action-icon">
          <svg viewBox="0 0 24 24"><circle cx="18" cy="5" r="3" stroke="#ef4444" stroke-width="1.8"/><circle cx="6" cy="12" r="3" stroke="#ef4444" stroke-width="1.8"/><circle cx="18" cy="19" r="3" stroke="#ef4444" stroke-width="1.8"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49" stroke="#ef4444" stroke-width="1.8"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49" stroke="#ef4444" stroke-width="1.8"/></svg>
        </div>
        <div class="modal__action-body">
          <div class="modal__action-title">Share</div>
          <div class="modal__action-sub">Let the world and your friends know about Protevio.</div>
        </div>
        <svg class="modal__action-chevron" viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg>
      </div>
    </div>
    <div class="modal__footer" id="modalFooter">Indexed on â€”</div>
  </div>
</div>

<script>
const API='https://api.protevio.com/api';
function encImg(f){if(!f)return '';return API+'/img/'+btoa(f).replace(/\+/g,'-').replace(/\//g,'_').replace(/=+$/,'')}
function getToken(){return localStorage.getItem('protevio_token')}

let results=[],searchId='',userPlan='free',isUnlocked=false,isFree=true,currentMatch=null,trialActive=false,trialAvailable=false;

// ===== INIT =====
(async function init(){
  const raw=sessionStorage.getItem('protevio_results');
  if(!raw){window.location.href='/';return}
  try{
    const d=JSON.parse(raw);
    if(Date.now()-d.timestamp>30*60*1000){sessionStorage.removeItem('protevio_results');window.location.href='/';return}
    results=d.results||[];searchId=d.search_id||'';userPlan=d.userPlan||'free';isUnlocked=d.isUnlocked||false;
    trialActive=d.trialActive||false;
    isFree=(userPlan==='free')&&!isUnlocked&&!trialActive;
    if(d.faceThumb){document.getElementById('faceThumb').src=d.faceThumb}
  }catch(e){window.location.href='/';return}

  // Check trial status from API if we're a free user
  if (userPlan === 'free' && !isUnlocked) {
    const token = getToken();
    if (token) {
      try {
        const res = await fetch(API + '/trial/status', { headers: { 'Authorization': 'Bearer ' + token } });
        if (res.ok) {
          const ts = await res.json();
          trialActive = ts.trial_active || false;
          trialAvailable = ts.trial_available || false;
          if (trialActive) {
            isFree = false;
            // Re-fetch full results if we have trial but got limited results
            if (results.length && !results[0].url && !results[0].page_url) {
              try {
                const rr = await fetch(API + '/search/unlock-results/' + searchId, { headers: { 'Authorization': 'Bearer ' + token } });
                if (rr.ok) {
                  const rd = await rr.json();
                  if (rd.results && rd.results.length) {
                    results = rd.results;
                    sessionStorage.setItem('protevio_results', JSON.stringify({
                      results, search_id: searchId, count: results.length,
                      userPlan, isUnlocked: false, trialActive: true, timestamp: Date.now()
                    }));
                  }
                }
              } catch(e) {}
            }
          }
        }
      } catch(e) {}
    }
  }

  render();
})();

function render(){
  document.getElementById('loadingState').style.display='none';
  const grid=document.getElementById('grid');
  if(!results.length){document.getElementById('noResults').style.display='block';return}
  grid.style.display='grid';

  // Stats
  document.getElementById('statCount').textContent=results.length;
  document.getElementById('statTime').textContent=((Math.random()*1.5)+.8).toFixed(2)+'s';

  // Plan label
  const pl=document.getElementById('planLabel');
  if(trialActive){pl.innerHTML='Trial Active <span class="trial-active-badge">âš¡ Free Trial</span>';pl.classList.add('info-bar__plan--paid')}
  else if(!isFree){pl.textContent='Full Access';pl.classList.add('info-bar__plan--paid')}

  // Buttons
  if(!isFree)document.getElementById('pdfBtn').style.display='flex';
  if(isFree){
    document.getElementById('unlockBanner').style.display='block';
    // Show trial banner if available
    if(trialAvailable){
      document.getElementById('trialBar').style.display='block';
    }
  }

  // Cards
  results.forEach((m,i)=>{
    const card=document.createElement('div');
    card.className='card'+(isFree?' card--locked':'');
    const sim=Math.round(m.similarity||0);
    const domain=m.domain||'';
    const imgUrl=encImg(m.filename||'');
    const explicit=m.nsfw||(m.category&&m.category!=='safe');

    card.innerHTML=
      '<div class="card__wrap">'+
        '<img class="card__img" src="'+imgUrl+'" alt="Match" loading="lazy" onerror="this.src=\'data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect fill=%22%2312161e%22 width=%22100%22 height=%22100%22/><text x=%2250%22 y=%2255%22 text-anchor=%22middle%22 fill=%22%234b5563%22 font-size=%2210%22>No image</text></svg>\'">' +
        '<div class="card__noise"></div>'+
        (explicit?'<div class="card__explicit"><span>E</span> POTENTIALLY EXPLICIT RESULT</div>':'')+
        '<div class="card__tap"><svg viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>Tap to see</div>'+
        '<div class="card__domain">'+(isFree?'â€¢â€¢â€¢â€¢â€¢â€¢.com':domain)+'</div>'+
        '<div class="card__sim">'+sim+'%</div>'+
      '</div>';

    card.addEventListener('click',()=>{
      if(isFree){card.classList.add('tease');setTimeout(()=>{card.classList.remove('tease');openModal(m)},350)}
      else openModal(m);
    });

    card.style.opacity='0';card.style.transform='translateY(16px)';
    card.style.transition='opacity .35s ease,transform .35s ease';
    setTimeout(()=>{card.style.opacity='1';card.style.transform='none'},40+i*25);
    grid.appendChild(card);
  });
}

// ===== MODAL =====
function openModal(m){
  currentMatch=m;
  const sim=Math.round(m.similarity||0);
  const domain=m.domain||'Unknown';
  document.getElementById('modalImg').src=encImg(m.filename||'');
  document.getElementById('modalImg').className='modal__img'+(isFree?' modal__img--locked':'');
  document.getElementById('modalDomainBadge').textContent=isFree?'â€¢â€¢â€¢â€¢â€¢â€¢.com':domain;
  document.getElementById('modalLock').style.display=isFree?'flex':'none';
  document.getElementById('modalLockPct').textContent=sim+'% match';
  document.getElementById('modalFooter').textContent='Indexed on '+(m.indexed_at||new Date().toISOString().slice(0,10));

  // Lock paid actions
  ['actWebsite','actImage','actExclude'].forEach(id=>{
    const el=document.getElementById(id);
    el.classList.toggle('modal__action--disabled',isFree);
  });
  document.getElementById('modalBg').classList.add('open');
}

function closeModal(){document.getElementById('modalBg').classList.remove('open');currentMatch=null}
document.getElementById('modalClose').onclick=closeModal;
document.getElementById('modalBg').onclick=e=>{if(e.target===e.currentTarget)closeModal()};
document.addEventListener('keydown',e=>{if(e.key==='Escape')closeModal()});

// Modal action handlers
document.getElementById('actWebsite').onclick=()=>{
  if(isFree||!currentMatch)return;
  const u=currentMatch.page_url||currentMatch.url;if(u)window.open(u,'_blank');
};
document.getElementById('actImage').onclick=()=>{
  if(isFree||!currentMatch)return;
  if(currentMatch.url)window.open(currentMatch.url,'_blank');
};
document.getElementById('actSearch').onclick=()=>{
  // Could redirect to search with this image
  window.location.href='/';
};
document.getElementById('actCopy').onclick=()=>{
  if(!currentMatch)return;
  navigator.clipboard.writeText(currentMatch.id||currentMatch.filename||'').then(()=>{
    const t=document.querySelector('#actCopy .modal__action-title');
    t.textContent='Copied!';setTimeout(()=>t.textContent='Copy Result ID',1500);
  });
};
document.getElementById('actExclude').onclick=()=>{
  if(isFree||!currentMatch)return;
  alert('Exclusion request submitted for '+(currentMatch.domain||'this result'));
};
document.getElementById('actShare').onclick=()=>{
  const text='I found my face online using Protevio AI!\nCheck where YOUR face appears â†’ https://protevio.com';
  if(navigator.share){navigator.share({text,url:'https://protevio.com'}).catch(()=>{})}
  else{navigator.clipboard.writeText(text).then(()=>{
    const t=document.querySelector('#actShare .modal__action-title');
    t.textContent='Link copied!';setTimeout(()=>t.textContent='Share',1500);
  })}
};

// ===== TRIAL ACTIVATION (from results page) =====
document.getElementById('trialBarBtn').addEventListener('click', async()=>{
  const token=getToken();
  if(!token){window.location.href='/login.html';return}
  const btn=document.getElementById('trialBarBtn');
  document.getElementById('trialBarBtnText').textContent='Activating...';
  btn.disabled=true;
  try{
    const res=await fetch(API+'/trial/activate',{method:'POST',headers:{'Authorization':'Bearer '+token}});
    const data=await res.json();
    if(data.success){
      // Update local user
      const user=JSON.parse(localStorage.getItem('protevio_user')||'{}');
      user.trial_active=true;user.trial_days_left=3;user.trial_used=true;user.trial_available=false;
      localStorage.setItem('protevio_user',JSON.stringify(user));
      // Reload page to re-render with full results
      trialActive=true;isFree=false;trialAvailable=false;
      document.getElementById('trialBar').style.display='none';
      document.getElementById('unlockBanner').style.display='none';
      // Fetch full results
      try{
        const rr=await fetch(API+'/search/unlock-results/'+searchId,{headers:{'Authorization':'Bearer '+token}});
        if(rr.ok){const rd=await rr.json();if(rd.results&&rd.results.length){results=rd.results;
          sessionStorage.setItem('protevio_results',JSON.stringify({results,search_id:searchId,count:results.length,userPlan:'free',isUnlocked:false,trialActive:true,timestamp:Date.now()}));
        }}
      }catch(e){}
      // Re-render
      document.getElementById('grid').innerHTML='';
      render();
    }else{
      alert(data.error||'Could not activate trial');
      document.getElementById('trialBarBtnText').textContent='Start Free Trial';btn.disabled=false;
    }
  }catch(e){alert('Connection error');document.getElementById('trialBarBtnText').textContent='Start Free Trial';btn.disabled=false}
});

// ===== UNLOCK =====
document.getElementById('unlockBtn').addEventListener('click',async()=>{
  const token=getToken();if(!token){window.location.href='/';return}
  localStorage.setItem('protevio_pending_unlock',JSON.stringify({search_id:searchId,results}));
  const btn=document.getElementById('unlockBtn');btn.textContent='Redirecting...';btn.disabled=true;
  try{
    const res=await fetch(API+'/checkout-single',{method:'POST',headers:{'Authorization':'Bearer '+token,'Content-Type':'application/json'},body:JSON.stringify({search_id:searchId})});
    const data=await res.json();
    if(data.url)window.location.href=data.url;
    else{alert(data.error||'Payment failed');btn.textContent='Unlock results';btn.disabled=false}
  }catch(e){alert('Connection error');btn.textContent='Unlock results';btn.disabled=false}
});

// ===== PDF =====
document.getElementById('pdfBtn').addEventListener('click',async()=>{
  const btn=document.getElementById('pdfBtn');const orig=btn.innerHTML;
  btn.innerHTML='<div class="spinner" style="width:16px;height:16px;border-width:2px"></div><span>Generating...</span>';btn.disabled=true;
  try{
    const r=await fetch(API+'/generate-report',{method:'POST',headers:{'Authorization':'Bearer '+getToken(),'Content-Type':'application/json'},body:JSON.stringify({results,search_id:searchId,search_date:new Date().toISOString().replace('T',' ').slice(0,19)+' UTC',email:(JSON.parse(localStorage.getItem('protevio_user')||'{}')).email||''})});
    if(!r.ok)throw 0;const b=await r.blob();const a=document.createElement('a');a.href=URL.createObjectURL(b);a.download='protevio_report_'+new Date().toISOString().slice(0,10)+'.pdf';a.click();
  }catch(e){alert('Failed to generate report.')}
  btn.innerHTML=orig;btn.disabled=false;
});

// ===== UNLOCK RETURN =====
(function(){
  const p=new URLSearchParams(location.search);const uid=p.get('unlocked');
  if(uid){isUnlocked=true;isFree=false;history.replaceState({},'',location.pathname);
    try{const s=JSON.parse(localStorage.getItem('protevio_pending_unlock')||'null');
    if(s&&s.results){localStorage.removeItem('protevio_pending_unlock');results=s.results;searchId=s.search_id||'';
    sessionStorage.setItem('protevio_results',JSON.stringify({results,search_id:searchId,count:results.length,userPlan,isUnlocked:true,timestamp:Date.now()}));
    document.getElementById('grid').innerHTML='';document.getElementById('unlockBanner').style.display='none';render()}}catch(e){}}
  if(p.get('unlock_cancelled')){history.replaceState({},'',location.pathname);localStorage.removeItem('protevio_pending_unlock')}
})();
</script>
</body>
</html>
