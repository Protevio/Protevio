<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="theme-color" content="#1a1f2e"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Dashboard — Protevio AI</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#1a1f2e;--bg2:#232a3d;--bg3:#2a3349;--bg4:#333d56;
  --border:#3a4562;--border-h:#4a5878;
  --text:#f0f2f7;--text2:#c4c9d8;--text3:#8891a5;
  --accent:#5b9aff;--accent-bg:rgba(91,154,255,.1);
  --green:#4ade80;--green-bg:rgba(74,222,128,.1);
  --red:#f87171;--red-bg:rgba(248,113,113,.1);
  --gold:#fbbf24;--gold-bg:rgba(251,191,36,.1);
  --purple:#a78bfa;--purple-bg:rgba(167,139,250,.1);
}
body{font-family:'Plus Jakarta Sans',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex}
.sidebar{width:230px;background:var(--bg2);border-right:1px solid var(--border);display:flex;flex-direction:column;position:fixed;top:0;left:0;bottom:0;z-index:50}
.sidebar__logo{display:flex;align-items:center;gap:10px;padding:20px 18px;border-bottom:1px solid var(--border)}
.sidebar__logo-icon{width:34px;height:34px;background:linear-gradient(135deg,var(--accent),var(--purple));border-radius:9px;display:flex;align-items:center;justify-content:center}
.sidebar__logo-icon svg{width:18px;height:18px;fill:#fff}
.sidebar__logo-text{font-size:1.05rem;font-weight:800;letter-spacing:-.02em}
.sidebar__nav{flex:1;padding:16px 10px}
.sidebar__link{display:flex;align-items:center;gap:11px;padding:11px 14px;color:var(--text3);text-decoration:none;font-size:.88rem;font-weight:500;transition:all .15s;border-radius:10px;margin-bottom:2px;cursor:pointer;border:2px solid transparent}
.sidebar__link:hover{background:rgba(91,154,255,.06);color:var(--text2)}
.sidebar__link.active{background:var(--accent-bg);color:var(--accent);border-color:var(--accent);font-weight:700}
.sidebar__link svg{width:18px;height:18px;stroke-width:2;fill:none;flex-shrink:0}
.sidebar__footer{padding:14px 10px;border-top:1px solid var(--border)}
.sidebar__logout{display:flex;align-items:center;gap:10px;width:100%;background:none;border:1px solid var(--border);color:var(--text3);padding:10px 14px;border-radius:10px;font-size:.85rem;font-weight:600;cursor:pointer;transition:all .2s;font-family:inherit}
.sidebar__logout:hover{border-color:var(--red);color:var(--red);background:var(--red-bg)}
.sidebar__logout svg{width:18px;height:18px;stroke-width:2;fill:none}
.main{margin-left:230px;flex:1;min-height:100vh;padding:28px}
.dash-header{margin-bottom:28px}
.dash-header__greeting{font-size:1.6rem;font-weight:800;margin-bottom:4px}
.dash-header__sub{color:var(--text3);font-size:.9rem}
.dash-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}
.dash-card{background:var(--bg2);border:1px solid var(--border);border-radius:16px;padding:24px;transition:border-color .2s}
.dash-card:hover{border-color:var(--border-h)}
.dash-card__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
.dash-card__title{display:flex;align-items:center;gap:10px;font-size:1rem;font-weight:700}
.dash-card__title svg{width:20px;height:20px;stroke-width:2;fill:none}
.dash-card__badge{font-size:.72rem;font-weight:700;padding:4px 12px;border-radius:20px;text-transform:uppercase;letter-spacing:.04em}
.dash-card__badge--free{background:rgba(136,145,165,.15);color:var(--text3)}
.dash-card__badge--basic{background:var(--accent-bg);color:var(--accent)}
.dash-card__badge--pro{background:var(--purple-bg);color:var(--purple)}
.dash-card__badge--unlimited{background:var(--gold-bg);color:var(--gold)}
.info-row{display:flex;align-items:center;gap:12px;padding:14px 16px;background:var(--bg3);border-radius:12px;margin-bottom:10px}
.info-row__icon{width:36px;height:36px;border-radius:9px;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.info-row__icon svg{width:18px;height:18px;stroke-width:2;fill:none}
.info-row__text{flex:1}
.info-row__label{font-size:.82rem;font-weight:600}
.info-row__sub{font-size:.72rem;color:var(--text3);margin-top:1px}
.info-row__action{color:var(--accent);font-size:.8rem;font-weight:600;text-decoration:none;cursor:pointer;background:none;border:none;font-family:inherit}
.info-row__action:hover{text-decoration:underline}
.stat-box{text-align:center;padding:16px;background:var(--bg3);border-radius:12px}
.stat-box__value{font-size:1.8rem;font-weight:800}
.stat-box__label{font-size:.75rem;color:var(--text3);margin-top:2px}
.usage-wrap{margin-top:14px}
.usage-header{display:flex;justify-content:space-between;font-size:.82rem;margin-bottom:8px}
.usage-header span:first-child{color:var(--text2)}
.usage-header span:last-child{color:var(--text3)}
.usage-bar{height:8px;background:var(--bg3);border-radius:4px;overflow:hidden}
.usage-bar__fill{height:100%;border-radius:4px;transition:width .5s}
.action-btn{display:inline-flex;align-items:center;gap:8px;padding:10px 22px;border-radius:10px;font-size:.88rem;font-weight:700;cursor:pointer;transition:all .2s;text-decoration:none;border:none;font-family:inherit}
.action-btn:hover{transform:translateY(-1px)}
.action-btn--primary{background:linear-gradient(135deg,var(--accent),var(--purple));color:#fff}
.action-btn--primary:hover{box-shadow:0 6px 20px rgba(91,154,255,.3)}
.action-btn--outline{background:none;border:1px solid var(--border);color:var(--text2)}
.action-btn--outline:hover{border-color:var(--accent);color:var(--accent)}
.action-btn svg{width:18px;height:18px;stroke:currentColor;stroke-width:2;fill:none}
.feature-card{padding:20px;background:var(--bg3);border-radius:12px;text-align:center}
.feature-card__icon{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;margin:0 auto 12px}
.feature-card__icon svg{width:24px;height:24px;stroke-width:2;fill:none}
.feature-card__title{font-size:.92rem;font-weight:700;margin-bottom:6px}
.feature-card__desc{font-size:.78rem;color:var(--text3);line-height:1.5;margin-bottom:14px}
.feature-card__badge{display:inline-flex;align-items:center;gap:4px;font-size:.72rem;font-weight:700;color:var(--gold);background:var(--gold-bg);padding:4px 12px;border-radius:8px}
.page-section{display:none}
.page-section.active{display:block}
.settings-item{display:flex;align-items:center;justify-content:space-between;padding:16px;background:var(--bg3);border-radius:12px;margin-bottom:10px}
.settings-item__left{display:flex;align-items:center;gap:12px}
.settings-item__icon{width:36px;height:36px;border-radius:9px;display:flex;align-items:center;justify-content:center}
.settings-item__icon svg{width:18px;height:18px;stroke-width:2;fill:none}
.settings-item__title{font-size:.88rem;font-weight:600}
.settings-item__sub{font-size:.72rem;color:var(--text3)}
.toggle{width:44px;height:24px;background:var(--bg4);border-radius:12px;position:relative;cursor:pointer;transition:background .2s;border:none}
.toggle.on{background:var(--accent)}
.toggle::after{content:'';position:absolute;width:18px;height:18px;background:#fff;border-radius:50%;top:3px;left:3px;transition:transform .2s}
.toggle.on::after{transform:translateX(20px)}
@media(max-width:768px){.sidebar{display:none}.main{margin-left:0;padding:16px}.dash-grid{grid-template-columns:1fr}}
</style>
</head>
<body>

<aside class="sidebar">
  <div class="sidebar__logo">
    <div class="sidebar__logo-icon"><svg viewBox="0 0 24 24"><path d="M15 3a6 6 0 00-6 6 6 6 0 006 6 6 6 0 006-6 6 6 0 00-6-6zM3 21a9 9 0 0118 0"/></svg></div>
    <span class="sidebar__logo-text">Protevio AI</span>
  </div>
  <nav class="sidebar__nav">
    <a class="sidebar__link active" data-page="dashboard">
      <svg viewBox="0 0 24 24" stroke="currentColor"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
      My Dashboard
    </a>
    <a class="sidebar__link" href="/testhomepage">
      <svg viewBox="0 0 24 24" stroke="currentColor"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
      Search
    </a>
    <a class="sidebar__link" data-page="history">
      <svg viewBox="0 0 24 24" stroke="currentColor"><path d="M12 8v4l3 3"/><circle cx="12" cy="12" r="10"/></svg>
      Search History
    </a>
    <a class="sidebar__link" data-page="exported">
      <svg viewBox="0 0 24 24" stroke="currentColor"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
      Exported Results
    </a>
    <a class="sidebar__link" data-page="alerts">
      <svg viewBox="0 0 24 24" stroke="currentColor"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg>
      Alerts
    </a>
    <a class="sidebar__link" data-page="protect">
      <svg viewBox="0 0 24 24" stroke="currentColor"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
      PROtect
    </a>
    <a class="sidebar__link" data-page="settings">
      <svg viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"/></svg>
      Settings
    </a>
    <div id="adminLink" style="display:none;margin-top:8px;padding-top:8px;border-top:1px solid var(--border)">
      <a class="sidebar__link" href="/admin" style="color:var(--red)">
        <svg viewBox="0 0 24 24" stroke="currentColor"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
        Admin Panel
      </a>
    </div>
  </nav>
  <div class="sidebar__footer">
    <button class="sidebar__logout" id="logoutBtn">
      <svg viewBox="0 0 24 24" stroke="currentColor"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
      Log Out
    </button>
  </div>
</aside>

<div class="main">

  <!-- DASHBOARD -->
  <div class="page-section active" id="page-dashboard">
    <div class="dash-header">
      <div class="dash-header__greeting" id="greeting">Welcome back</div>
      <div class="dash-header__sub">Here's your Protevio AI account overview</div>
    </div>
    <div class="dash-grid">
      <div class="dash-card">
        <div class="dash-card__header">
          <div class="dash-card__title"><svg viewBox="0 0 24 24" stroke="var(--accent)"><rect x="1" y="4" width="22" height="16" rx="2"/><path d="M1 10h22"/></svg>My Subscription</div>
          <div class="dash-card__badge" id="planBadge">Free</div>
        </div>
        <div style="font-size:.88rem;color:var(--text2);margin-bottom:14px">Plan: <strong id="planName" style="color:var(--text)">Free</strong></div>
        <div class="info-row">
          <div class="info-row__icon" style="background:var(--accent-bg)"><svg viewBox="0 0 24 24" stroke="var(--accent)"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></div>
          <div class="info-row__text">
            <div class="info-row__label" id="userEmail">—</div>
            <div class="info-row__sub" id="userCreated">Created: —</div>
          </div>
        </div>
        <div class="info-row">
          <div class="info-row__icon" style="background:var(--purple-bg)"><svg viewBox="0 0 24 24" stroke="var(--purple)"><rect x="1" y="4" width="22" height="16" rx="2"/><path d="M1 10h22"/></svg></div>
          <div class="info-row__text">
            <div class="info-row__label">Orders & Invoices</div>
            <div class="info-row__sub">Manage your payment history</div>
          </div>
          <button class="info-row__action" onclick="alert('Payment management coming soon.')">Manage →</button>
        </div>
        <div style="margin-top:16px"><a href="/pricing" class="action-btn action-btn--outline"><svg viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/></svg>Explore Pricing</a></div>
      </div>
      <div class="dash-card">
        <div class="dash-card__header">
          <div class="dash-card__title"><svg viewBox="0 0 24 24" stroke="var(--green)"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>Search Activity</div>
          <div style="text-align:right"><div style="font-size:.82rem;color:var(--text2)">You have <strong style="color:var(--accent)" id="searchesRemaining">—</strong> left today</div><div style="font-size:.72rem;color:var(--text3)">Total Searches: <span id="totalSearches">0</span></div></div>
        </div>
        <div class="usage-wrap" style="margin-bottom:18px">
          <div class="usage-header"><span>Daily Usage</span><span id="usageText">0 / 10</span></div>
          <div class="usage-bar"><div class="usage-bar__fill" id="usageBar" style="width:0;background:var(--green)"></div></div>
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:18px">
          <div class="stat-box"><div class="stat-box__value" id="statToday" style="color:var(--accent)">0</div><div class="stat-box__label">Today</div></div>
          <div class="stat-box"><div class="stat-box__value" id="statTotal" style="color:var(--purple)">0</div><div class="stat-box__label">All Time</div></div>
        </div>
        <a href="/testhomepage" class="action-btn action-btn--primary" style="width:100%;justify-content:center"><svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>Perform Search</a>
      </div>
    </div>
    <div class="dash-grid">
      <div class="dash-card">
        <div class="dash-card__header">
          <div class="dash-card__title"><svg viewBox="0 0 24 24" stroke="var(--gold)"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg>Alerts</div>
          <div style="font-size:.88rem"><strong style="color:var(--accent)">0</strong><span style="color:var(--text3)"> / 0</span></div>
        </div>
        <div class="feature-card">
          <div class="feature-card__icon" style="background:var(--gold-bg)"><svg viewBox="0 0 24 24" stroke="var(--gold)"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg></div>
          <div class="feature-card__title">Face Monitoring Alerts</div>
          <div class="feature-card__desc">Get notified when new photos matching your face appear online. Set up automated monitoring to protect your digital identity.</div>
          <div class="feature-card__badge"><svg viewBox="0 0 24 24" style="width:12px;height:12px;stroke:currentColor;stroke-width:2;fill:none"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>Upgrade to Pro</div>
        </div>
      </div>
      <div class="dash-card">
        <div class="dash-card__header">
          <div class="dash-card__title"><svg viewBox="0 0 24 24" stroke="var(--green)"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>PROtect</div>
        </div>
        <div class="feature-card">
          <div class="feature-card__icon" style="background:var(--green-bg)"><svg viewBox="0 0 24 24" stroke="var(--green)"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M9 12l2 2 4-4"/></svg></div>
          <div class="feature-card__title">PROtect Your Photos</div>
          <div class="feature-card__desc">Request removal of your photos from search results. Submit takedown requests for images found across our indexed database.</div>
          <div class="feature-card__badge"><svg viewBox="0 0 24 24" style="width:12px;height:12px;stroke:currentColor;stroke-width:2;fill:none"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>Upgrade to Pro</div>
        </div>
      </div>
    </div>
  </div>

  <!-- SEARCH HISTORY -->
  <div class="page-section" id="page-history">
    <div class="dash-header"><div class="dash-header__greeting">Search History</div><div class="dash-header__sub">Your recent face search activity</div></div>
    <div class="dash-card" id="historyContent"><div style="text-align:center;padding:40px;color:var(--text3)">Loading...</div></div>
  </div>

  <!-- EXPORTED -->
  <div class="page-section" id="page-exported">
    <div class="dash-header"><div class="dash-header__greeting">Exported Results</div><div class="dash-header__sub">Download your previous search reports</div></div>
    <div class="dash-card" style="text-align:center;padding:48px 24px">
      <div class="feature-card__icon" style="background:var(--accent-bg);margin:0 auto 16px"><svg viewBox="0 0 24 24" stroke="var(--accent)" style="width:28px;height:28px;stroke-width:2;fill:none"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg></div>
      <h3 style="font-size:1.1rem;font-weight:700;margin-bottom:8px">No Exported Results</h3>
      <p style="color:var(--text3);font-size:.88rem;line-height:1.6;max-width:420px;margin:0 auto 20px">After performing a search, you can export and download the results as a detailed PDF report. Exported reports will appear here.</p>
      <a href="/testhomepage" class="action-btn action-btn--primary"><svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>Start a Search</a>
    </div>
  </div>

  <!-- ALERTS -->
  <div class="page-section" id="page-alerts">
    <div class="dash-header"><div class="dash-header__greeting">Alerts</div><div class="dash-header__sub">Monitor the web for new appearances of your face</div></div>
    <div class="dash-card" style="text-align:center;padding:48px 24px">
      <div class="feature-card__icon" style="background:var(--gold-bg);margin:0 auto 16px"><svg viewBox="0 0 24 24" stroke="var(--gold)" style="width:28px;height:28px;stroke-width:2;fill:none"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg></div>
      <h3 style="font-size:1.1rem;font-weight:700;margin-bottom:8px">Automated Face Monitoring</h3>
      <p style="color:var(--text3);font-size:.88rem;line-height:1.6;max-width:420px;margin:0 auto 20px">Upload a face and we'll continuously scan newly indexed content to alert you when matching photos appear. Perfect for protecting your online identity.</p>
      <div class="feature-card__badge" style="font-size:.8rem;padding:6px 16px"><svg viewBox="0 0 24 24" style="width:14px;height:14px;stroke:currentColor;stroke-width:2;fill:none"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>Available with Pro Plan</div>
    </div>
  </div>

  <!-- PROTECT -->
  <div class="page-section" id="page-protect">
    <div class="dash-header"><div class="dash-header__greeting">PROtect</div><div class="dash-header__sub">Request removal of your images from search results</div></div>
    <div class="dash-card" style="text-align:center;padding:48px 24px">
      <div class="feature-card__icon" style="background:var(--green-bg);margin:0 auto 16px"><svg viewBox="0 0 24 24" stroke="var(--green)" style="width:28px;height:28px;stroke-width:2;fill:none"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M9 12l2 2 4-4"/></svg></div>
      <h3 style="font-size:1.1rem;font-weight:700;margin-bottom:8px">PROtect Your Digital Identity</h3>
      <p style="color:var(--text3);font-size:.88rem;line-height:1.6;max-width:420px;margin:0 auto 20px">Found your photos on websites you didn't authorize? Use PROtect to submit DMCA takedown requests and have your images removed from our search index.</p>
      <div class="feature-card__badge" style="font-size:.8rem;padding:6px 16px"><svg viewBox="0 0 24 24" style="width:14px;height:14px;stroke:currentColor;stroke-width:2;fill:none"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>Available with Pro Plan</div>
    </div>
  </div>

  <!-- SETTINGS -->
  <div class="page-section" id="page-settings">
    <div class="dash-header"><div class="dash-header__greeting">Settings</div><div class="dash-header__sub">Manage your account preferences</div></div>
    <div class="dash-card">
      <div class="settings-item">
        <div class="settings-item__left">
          <div class="settings-item__icon" style="background:var(--accent-bg)"><svg viewBox="0 0 24 24" stroke="var(--accent)"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></div>
          <div><div class="settings-item__title" id="settingsName">—</div><div class="settings-item__sub" id="settingsEmail">—</div></div>
        </div>
      </div>
      <div class="settings-item">
        <div class="settings-item__left">
          <div class="settings-item__icon" style="background:var(--green-bg)"><svg viewBox="0 0 24 24" stroke="var(--green)"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg></div>
          <div><div class="settings-item__title">Safe Search</div><div class="settings-item__sub">Filter explicit results from searches</div></div>
        </div>
        <button class="toggle on" onclick="this.classList.toggle('on')"></button>
      </div>
      <div class="settings-item">
        <div class="settings-item__left">
          <div class="settings-item__icon" style="background:var(--purple-bg)"><svg viewBox="0 0 24 24" stroke="var(--purple)"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg></div>
          <div><div class="settings-item__title">Email Notifications</div><div class="settings-item__sub">Receive alerts about new matches</div></div>
        </div>
        <button class="toggle" onclick="this.classList.toggle('on')"></button>
      </div>
      <div class="settings-item">
        <div class="settings-item__left">
          <div class="settings-item__icon" style="background:var(--gold-bg)"><svg viewBox="0 0 24 24" stroke="var(--gold)"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg></div>
          <div><div class="settings-item__title">Two-Factor Authentication</div><div class="settings-item__sub">Add extra security to your account</div></div>
        </div>
        <button class="toggle" onclick="this.classList.toggle('on')"></button>
      </div>
      <div style="margin-top:20px;padding-top:16px;border-top:1px solid var(--border)">
        <button class="action-btn action-btn--outline" style="color:var(--red);border-color:var(--red)" onclick="alert('Contact support@protevio.com to delete your account.')">
          <svg viewBox="0 0 24 24" style="stroke:var(--red)"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg>
          Delete Account
        </button>
      </div>
    </div>
  </div>

</div>

<script>
const API = 'https://api.protevio.com/api';
const token = localStorage.getItem('protevio_token');
if(!token) window.location.href = '/login';

document.getElementById('logoutBtn').addEventListener('click', () => {
  localStorage.removeItem('protevio_token');
  localStorage.removeItem('protevio_user');
  window.location.href = '/login';
});

document.querySelectorAll('.sidebar__link[data-page]').forEach(link => {
  link.addEventListener('click', e => {
    e.preventDefault();
    document.querySelectorAll('.sidebar__link').forEach(l => l.classList.remove('active'));
    link.classList.add('active');
    document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active'));
    document.getElementById('page-' + link.dataset.page).classList.add('active');
  });
});

async function loadDashboard() {
  try {
    const res = await fetch(API + '/auth/me', { headers: {'Authorization': 'Bearer ' + token} });
    if(res.status === 401) { window.location.href = '/login'; return; }
    const user = await res.json();
    localStorage.setItem('protevio_user', JSON.stringify(user));

    const plan = user.plan || 'free';
    const limits = {free:10, basic:50, pro:200, unlimited:-1};
    const limit = limits[plan] || 10;
    const used = user.searches_today || 0;
    const total = user.total_searches || 0;
    const remaining = limit === -1 ? '∞' : Math.max(0, limit - used);
    const pct = limit === -1 ? 3 : Math.min(100, Math.round((used/limit)*100));
    const barColor = pct > 80 ? 'var(--red)' : pct > 50 ? 'var(--gold)' : 'var(--green)';

    const hour = new Date().getHours();
    const greet = hour < 12 ? 'Good morning' : hour < 18 ? 'Good afternoon' : 'Good evening';
    document.getElementById('greeting').textContent = greet + ', ' + (user.name || user.username);

    document.getElementById('planBadge').textContent = plan.charAt(0).toUpperCase() + plan.slice(1);
    document.getElementById('planBadge').className = 'dash-card__badge dash-card__badge--' + plan;
    document.getElementById('planName').textContent = plan.charAt(0).toUpperCase() + plan.slice(1);
    document.getElementById('userEmail').textContent = user.email || user.username;
    document.getElementById('userCreated').textContent = 'Created: ' + (user.created_at ? new Date(user.created_at).toLocaleDateString('en-GB') : '—');

    document.getElementById('searchesRemaining').textContent = remaining;
    document.getElementById('totalSearches').textContent = total;
    document.getElementById('usageText').textContent = limit === -1 ? used + ' / Unlimited' : used + ' / ' + limit;
    document.getElementById('usageBar').style.width = pct + '%';
    document.getElementById('usageBar').style.background = barColor;
    document.getElementById('statToday').textContent = used;
    document.getElementById('statTotal').textContent = total;

    document.getElementById('settingsName').textContent = user.name || user.username;
    document.getElementById('settingsEmail').textContent = user.email || '—';

    if(user.role === 'admin') document.getElementById('adminLink').style.display = 'block';

    // History
    document.getElementById('historyContent').innerHTML = total === 0
      ? '<div style="text-align:center;padding:48px;color:var(--text3)"><svg viewBox="0 0 24 24" style="width:48px;height:48px;stroke:var(--text3);stroke-width:1.5;fill:none;display:block;margin:0 auto 12px"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>No searches yet<br><br><a href="/testhomepage" style="color:var(--accent);font-weight:600;text-decoration:none">Perform your first search →</a></div>'
      : '<div style="display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:20px"><div class="stat-box"><div class="stat-box__value" style="color:var(--accent)">'+used+'</div><div class="stat-box__label">Searches Today</div></div><div class="stat-box"><div class="stat-box__value" style="color:var(--purple)">'+total+'</div><div class="stat-box__label">Total Searches</div></div></div><p style="text-align:center;color:var(--text3);font-size:.85rem;padding:20px 0">Detailed search history with result previews coming soon.</p><div style="text-align:center"><a href="/testhomepage" class="action-btn action-btn--primary"><svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>New Search</a></div>';

  } catch(err) { console.error(err); }
}

loadDashboard();
</script>
</body>
</html>
